{% load static %}
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-lg mb-5">
    <div class="container-fluid">

        <!-- Logo -->
        <a class="navbar-brand" href="/">
            <img src="{% static 'images/favicon.png' %}" >
            <i>MasterCode</i>
        </a>
        <!-- toggle button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!-- search bar form & user  profile -->
        <div class="collapse navbar-collapse" id="navbarScroll">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <!-- search form -->
            <form class="d-flex" role="search" method="GET" action="{% url 'home' %}" >
                <input class="form-control me-2 d-none d-sm-block" type="search" placeholder="Search..." aria-label="Search" name="q">
                <button class="btn btn-primary d-none d-sm-block" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                </button>
            </form>
            <!-- user profile -->
            <ul class="navbar-nav ms-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                <li class="nav-item dropdown">
                    {% if request.user.is_authenticated %}
                    <a class="nav-link dropdown-toggle" href="{% url 'user-profile' user.id %}" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img class="img-circle" src="{{request.user.avatar.url}}" width="30px" height="35px" style="border-radius: 1000px;"/>
                        @{{ request.user.username }}
                    </a>
                    {% else %}
                    <a class="nav-link dropdown-toggle" href="profile.html" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img class="img-circle" src="{% static 'images/avatar.svg' %}" width="30px" height="35px" style="border-radius: 1000px;"/>
                       login
                    </a>
                    {% endif %}
                    
                    <ul class="dropdown-menu float-end" aria-labelledby="navbarScrollingDropdown">
                        <li>
                            {% if request.user.is_authenticated %}
                            <a class="dropdown-item" href="{% url 'user-profile' user.id %}">
                                <img class="img-circle" src="{{request.user.avatar.url}}" width="30px" height="30px" style="border-radius: 1000px;"/>
                                profile
                            </a>
                            {% else %}
                            <a class="dropdown-item" href="{% url 'user-profile' user.id %}">
                                <img class="img-circle" src="{% static 'images/avatar.svg' %}" width="30px" height="30px" style="border-radius: 1000px;"/>
                                profile
                            </a>
                            {% endif %}
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url 'edit-profile' %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-wrench-adjustable" viewBox="0 0 16 16">
                                <path d="M16 4.5a4.492 4.492 0 0 1-1.703 3.526L13 5l2.959-1.11c.027.2.041.403.041.61Z"/>
                                <path d="M11.5 9c.653 0 1.273-.139 1.833-.39L12 5.5 11 3l3.826-1.53A4.5 4.5 0 0 0 7.29 6.092l-6.116 5.096a2.583 2.583 0 1 0 3.638 3.638L9.908 8.71A4.49 4.49 0 0 0 11.5 9Zm-1.292-4.361-.596.893.809-.27a.25.25 0 0 1 .287.377l-.596.893.809-.27.158.475-1.5.5a.25.25 0 0 1-.287-.376l.596-.893-.809.27a.25.25 0 0 1-.287-.377l.596-.893-.809.27-.158-.475 1.5-.5a.25.25 0 0 1 .287.376ZM3 14a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/>
                            </svg>
                            settings
                        </a></li>
                        
                        <li>
                            {% if request.user.is_authenticated %}
                            <a class="dropdown-item" href="{% url 'logout' %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-power" viewBox="0 0 16 16">
                                <path d="M7.5 1v7h1V1h-1z"/>
                                <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                              </svg>
                            logout
                            </a>
                            {% else %}
                            <a class="dropdown-item" href="{% url 'login' %}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-power" viewBox="0 0 16 16">
                                    <path d="M7.5 1v7h1V1h-1z"/>
                                    <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                                  </svg>
                                login
                            </a>
                            {% endif %}
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- End of form and user profile -->
    </div>
    <!-- container nav end -->
</nav>
<!-- navbar end -->